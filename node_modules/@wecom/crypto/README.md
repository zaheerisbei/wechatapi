# @wecom/crypto

企业微信加解密库，详见企业微信 API 文档 [加解密方案说明](https://work.weixin.qq.com/api/doc/90001/90148/91144) 和 [JS-SDK使用权限签名算法](https://work.weixin.qq.com/api/doc/90000/90136/90506)。

## 使用

```bash
# with npm
npm install @wecom/crypto
# with yarn
yarn add @wecom/crypto
```

## API

### 获取消息体签名

```typescript
import { getSignature } from '@wecom/crypto';

const signature = getSignature(token, timestamp, nonce, ciphered);

expect(signature).toEqual(query.signature);
```

### 解密消息

```typescript
import { decrypt } from '@wecom/crypto';

const { message, id } = decrypt(encodingAESKey, ciphered);

console.log({ message, id });
```

### 加密消息

```typescript
import { encrypt } from '@wecom/crypto';

const ciphered = encrypt(encodingAESKey, message, id);

console.log(ciphered);
```

### 获取 JS-SDK 签名

```typescript
import { getJsApiSignature } from '@wecom/crypto'

const { timestamp, nonceStr, signature } = getJsApiSignature({ url, ticket });

console.log({ timestamp, nonceStr, signature });
```
